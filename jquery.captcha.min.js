$.fn.captcha=function(e){function t(t,a){t.clearRect(0,0,t.canvas.width,t.canvas.height);var r={x:15,y:30,h:85,w:85,r:6,background:"#55acee",borderColor:"black",activeBackground:"lightgray"},l={background:"green",borderColor:"black"};t.fillStyle=r.background,t.strokStyle=r.borderColor,t.fillRect(r.x,r.y,r.w,r.h),a&&i(r,a)&&(t.fillStyle=r.activeBackground,o.val(e),n=!0),t.beginPath(),t.moveTo(r.x,r.y+r.r),t.lineTo(r.x,r.y+r.h-r.r),t.quadraticCurveTo(r.x,r.y+r.h,r.x+r.r,r.y+r.h),t.lineTo(r.x+r.w-r.r,r.y+r.h),t.quadraticCurveTo(r.x+r.w,r.y+r.h,r.x+r.w,r.y+r.h-r.r),t.lineTo(r.x+r.w,r.y+r.r),t.quadraticCurveTo(r.x+r.w,r.y,r.x+r.w-r.r,r.y),t.lineTo(r.x+r.r,r.y),t.quadraticCurveTo(r.x,r.y,r.x,r.y+r.r),t.closePath(),t.lineWidth=5,t.stroke(),t.fill(),a&&i(r,a)&&(t.fillStyle=l.background,t.strokStyle=l.borderColor,t.beginPath(),t.moveTo(r.x+15,r.y+r.h-8),t.lineTo(r.x+r.w+12,r.y+14),t.lineTo(r.x+20,r.y+r.h-20),t.lineTo(r.x+10,r.y+r.h-50),t.closePath(),t.lineWidth=3,t.stroke(),t.fill()),t.fillStyle=r.Background,t.font="20px Verdana";var c={x:120,y:60,spacing:30};n?(t.fillText("Congradulations",c.x,c.y),t.fillText("You're Human",c.x,c.y+c.spacing)):(t.fillText("Check the box",c.x,c.y),t.fillText("if you're human",c.x,c.y+c.spacing))}function i(e,t){var i=e.w,a=e.h,o=t.x>e.x&&t.x<i,r=t.y>e.y&&t.y<a;return o&&r?!0:!1}window.requestAnimationFrame=window.requestAnimationFrame||function(e){window.setTimeout(e,16)},this.wrap("<div class='captcha'></div>");var a=this.parent(),o=this,r=this.attr("id")+"_display";a.append("<canvas id='"+r+"'> </canvas>");var l=document.getElementById(r);l.style.width="140px",l.style.height="70px";var n=!1,c=document.getElementById(r).getContext("2d"),x=window.devicePixelRatio||1,h=c.webkitBackingStorePixelRatio||c.mozBackingStorePixelRatio||c.msBackingStorePixelRatio||c.oBackingStorePixelRatio||c.backingStorePixelRatio||1,y=x/h,d=l.width,u=l.height;l.width=d*y,l.height=u*y,l.style.width=d+"px",l.style.height=u+"px",t(c,!1);var g=l.getBoundingClientRect();a.click(function(i){if(o.val()!==e){var a={x:i.clientX-g.left,y:i.clientY-g.top};t(c,a)}})};
